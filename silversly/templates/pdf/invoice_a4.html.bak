{% load sales_tags %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<style type="text/css">

body {
    font-size: 13px;
}
@page {

    size: a4;
    top: 12.6cm;
    margin-left: 1.1cm;
    margin-right: 1cm;
    margin-bottom: 2.7cm;
  -pdf-frame-border: 1;
    @frame top {
        -pdf-frame-content: intestazione;
        margin-left: 1.5cm;
        margin-right: 1cm;
        top: 8.3cm;
    }
    @frame footer {
        -pdf-frame-content: footerblock;
        -pdf-frame-border: 1;
        margin-left: 1.1cm;
        margin-right: 1cm;
        height: 1.7cm;
        bottom: 0.9cm;
    }
    @frame address {
    /*-pdf-frame-border: 1;*/
        -pdf-frame-content: address;
        margin-left: 11.5cm;
        margin-right: 1cm;
        height: 3cm;
        top: 6.5cm;
    } 
}

td {
    padding-top: .1cm;
    padding-left: .1cm;
    padding-right: .1cm;
    border: 1px solid red;
}

.grande {
    font-size: 1.5em;
}

.rif_ddt {
   font-weight: bold;
}

.right {
    text-align: right
}

.quantity {
    width: 1.7cm;
} 
.description {
    text-align: left;
} 
.price {
    width: 2.5cm;
} 
.item_total {
    width: 3.1cm;
} 



#address {
    font-size: 1.5em;
    font-family: sanserif;
}

</style>
</head>
<body>

<div id="intestazione">
    <table class="right">
        <tr>
            <td class="grande">{{ invoice.number }}</td>
        </tr>
        <tr>
            <td class="grande">{{ invoice.date }}</td>
        </tr>
        <tr>
            <td colspan="3" style="text-align: left; padding-left: 1cm;">
                 {% for ddt in ddts %}
                    {{ ddt.number }}
                    {% if not forloop.last %} + {% endif%} 
                 {% endfor %}
            </td>
        </tr>
        <tr>
            <td></td>
            <td> {{ customer.piva }} </td>
            <td> {{ invoice.get_payment_method_display }}</td>
        </tr>
    </table>
</div>

<div id="address">
    <pre>Spett.le {{ customer.name }}
{{ customer.main_address }}</pre>
</div>

<!--
<table id="items" class="right">
{% if cart %}
    {% include "pdf/invoice_cart.html" %}
{% else %}
    {% for ddt in ddts %}
    <tr>
        <td></td>
        <td class="rif_ddt">*** Ddt n.{{ ddt.number }} del {{ ddt.date }}</td>
    </tr>
        {% include "pdf/invoice_cart.html"  with cart=ddt.cart %}
    {% endfor %}
{% endif %}
</table>
-->
<ul>
{% for ddt in ddts %}
    <li class="rif_ddt">*** Ddt n.{{ ddt.number }} del {{ ddt.date }}</li>
    {% include "pdf/invoice_cart.html"  with cart=ddt.cart %}
{% endfor %}
</ul>

<div id="footerblock">
{% with total=invoice.apply_vat %}    
    <table id="footer_table" class="right">
        <tr>
            <td style="width: 3.3cm"></td>
            <td style="width: 3.3cm">{{ invoice.costs }}&euro;</td>
            <td style="width: 5.6cm">{{ invoice.total_net }}&euro;</td>
            <td>20</td>
            <td style="width: 2.5cm">{{ total.1 }}&euro;</td>
            <td style="width: 3.1cm">{{ total.1|exactAdd:invoice.costs }}&euro;</td>
        </tr>
        <tr>
            <td colspan="5" style="text-align: left"><pdf:pagenumber /> </td>
            <td>{{ total.0 }}&euro;</td>
        </tr>
    </table>    
{% endwith %}
</div>
</body>
</html>
