{% load sales_tags %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<style type="text/css">

body {
    font-size: 13px;
}
@page {

    size: a4;
    top: 12.7cm;
    margin-left: 1.1cm;
    margin-right: 1.1cm;
    margin-bottom: 2.7cm;
    @frame top {
        -pdf-frame-content: intestazione;
        margin-left: 1.5cm;
        margin-right: 1.1cm;
        top: 8.3cm;
    }
    @frame footer {
        -pdf-frame-content: footerblock;
        margin-left: 1.1cm;
        margin-right: 1.1cm;
        height: 1.7cm;
        bottom: 0.9cm;
    }
    @frame address {
    /*-pdf-frame-border: 1;*/
        -pdf-frame-content: address;
        margin-left: 11.5cm;
        margin-right: 1cm;
        height: 3cm;
        top: 6.5cm;
    }
}

td {
    padding-top: .1cm;
    padding-left: .1cm;
    padding-right: .1cm;
    margin-top: .1cm;

}

#items td {
    padding-top: .06cm;

}

.grande {
    font-size: 1.5em;
}

.italic  {
    font-style: italic;
}

.rif_ddt {
   font-weight: bold;
   padding-right: 3cm;
}

.right {
    text-align: right
}

.quantity {
    width: 1.7cm;
}
.description {
    text-align: left;
}
.price {
    width: 2.5cm;
}
.item_total {
    width: 3.1cm;
}



#address {
    font-size: 1.5em;
    font-family: sanserif;
}

</style>
</head>
<body>

<div id="intestazione">
    <table class="right">
        <tr>
            <td class="grande">{{ invoice.number }}</td>
        </tr>
        <tr>
            <td class="grande">{{ invoice.date }}</td>
        </tr>
        <tr>
            <td colspan="3" style="text-align: left; padding-left: 1cm;">
                 {% for ddt in ddts %}
                    {{ ddt.number }}
                    {% if not forloop.last %} + {% endif%}
                 {% endfor %}
            </td>
        </tr>
        <tr>
            <td></td>
            <td> {{ customer.piva }} </td>
            <td> {{ invoice.get_payment_method_display }}</td>
        </tr>
    </table>
</div>

<div id="address">
    <pre>Spett.le {{ customer.name }}
{{ customer.main_address }}</pre>
</div>

<div id="items">
{% for ddt in ddts %}
    <table class="right">
        <tr>
        <td class="rif_ddt">*** Ddt n.{{ ddt.number }} del {{ ddt.date }}</td>
        </tr>
    </table>
    {% include "pdf/invoice_cart.html"  with cart=ddt.cart %}

{% endfor %}
</div>

<div id="footerblock">
{% with total=invoice.apply_vat %}
    <table id="footer_table" class="right">
        <tr>
            {% if invoice.costs %}
            <td style="width: 3.3cm">{{ invoice.total_net|exactSub:invoice.costs}}&euro;</td>
            <td style="width: 3.3cm">{{ invoice.costs }}&euro;</td>
            {% else %}
            <td style="width: 3.3cm"></td>
            <td style="width: 3.3cm"></td>
            {% endif %}
            <td style="width: 5.6cm">{{ invoice.total_net }}&euro;</td>
            <td>{{ tax }}</td>
            <td style="width: 2.5cm">{{ total.1 }}&euro;</td>
            <td style="width: 3.1cm"></td>
        </tr>
        <tr>
            <td colspan="5" style="text-align: left"><pdf:pagenumber /> </td>
            <td>{{ total.0 }}&euro;</td>
        </tr>
    </table>
{% endwith %}
</div>
</body>
</html>
